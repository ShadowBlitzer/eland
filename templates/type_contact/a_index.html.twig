{% extends 'admin.html.twig' %}

{% import 'macro/top_button.html.twig' as tb %}
{% import 'macro/mini_button.html.twig' as mb %}

{%- block top_buttons -%}
{{- tb.add(path('type_contact_add', acc_sch), 'type_contact_add.title') -}}
{%- endblock top_buttons -%}

{%- block inner -%}

<div class="panel panel-default printview">
<div class="table-responsive">
<table class="table table-striped table-hover table-bordered footable" data-sort="false">
<thead>
<tr>
<th>{{- 'type_contact.abbreviation'|trans -}}</th>
<th data-hide="phone">{{- 'type_contact.name'|trans -}}</th>
<th data-hide="phone">{{- 'btn.delete'|trans -}}</th>
<th data-hide="phone">{{- 'type_contact_index.contact_count'|trans -}}</th>
</tr>
</thead>
<tbody>

{%- for t in contact_types -%}

    {%- set protected = t.abbrev in protected_types ? true : false -%}
    <tr>
    <td>
    <strong>
    {%- if protected -%}
    {{- t.abbrev -}}*
    {%- else -%}
    <a href="{{- path('type_contact_edit', acc_sch|merge({'id': t.id})) -}}">
    {{- t.abbrev -}}
    </a>
    {%- endif -%}
    </strong> 
    </td>

    <td>
    {%- if protected -%}
    {{- t.name -}}*
    {%- else -%}
    <a href="{{- path('type_contact_edit', acc_sch|merge({'id': t.id})) -}}">
    {{- t.name -}}
    </a>
    {%- endif -%}
    </td>

    {%- set can_delete = not protected and not t.count -%}

    <td>
    {%- if not protected and not t.count -%}
        {{- mb.del(path('type_contact_del', acc_sch|merge({'id': t.id})), 'type_contact_del.btn') -}}
    {%- endif -%}
    </td>

    <td>
    {%- if t.count -%}
    <a href="{{- path('contact_detail_index', acc_sch|merge({'id': t.id})) -}}">
    {{- t.count -}}
    {%- endif -%}
    </td>

    </tr>

{%- endfor -%}

</tbody>
</table>
</div>
</div>

{%- endblock inner -%}

{%- block post_inner -%}

<p>
<ul>
<li>{{- 'type_contact_index.explain_protected'|trans -}}</li>
</ul>
</p>

{%- endblock post_inner -%}

