{% extends 'app.html.twig' %}

{% import 'macro/menu.html.twig' as menu %}

{% set auth_pages = {
	'offers_and_wants': {'fa': 'newspaper-o'},
	'users': {'fa': 'users'},
	'members': {'fa': 'users'},
	'transactions': {'fa': 'exchange'},
	'news': {'fa': 'calendar-o'},
	'docs': {'fa': 'files-o'},
	'forum': {'fa': 'comments-o'},
	'support': {'fa': 'ambulance'},
	'my_data': {'fa': 'user'},
	'my_offers_and_wants': {'fa': 'newspaper-o'},
	'my_transactions': {'fa': 'exchange'},
	'logout' : {'fa': 'sign-out'}
}
%}

{% block body_attr %} data-elas-group-login="{{ app.url.elas_group_login|default('') }}"{% endblock %}

{% block loading_img %}<img src="{{ asset('loading.gif', 'img') }}" class="ajax-loader"></img>{% endblock loading_img %}

{% block navbar_toggle_menu %}
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
{% endblock navbar_toggle_menu %}

{% block navbar_menu %}
<div class="collapse navbar-collapse" id="navbar-collapse-1">
<ul class="nav navbar-nav navbar-right">

{% block navbar_groups %}{% endblock %}

{% block navbar_user %}

	{{ menu.nav_dropdown('who is this', 'user') }}

	{% block navbar_user_menu %}

{#
		{{ menu.li(user_self_url|default('#'), 'Mijn gegevens', 'user') }} 
		{{ menu.li(messages_self_url|default('#'), 'Mijn vraag en aanbod', 'newspaper-o') }} 
		{{ menu.li(transactions_self_url|default('#'), 'Mijn transacties', 'exchange') }}

#}
		<li class="divider"></li>
	{% endblock navbar_user_menu %}
{#
	{{ menu.li(logout_url|default('#'), 'Uitloggen', 'sign-out') }}
#}
	</ul>
	</li>

{% endblock navbar_user %}

{% block navbar_admin_disabled %}
{% endblock navbar_admin_disabled %}

{% block navbar_admin %}
{% endblock navbar_admin %}

</ul>
</div>

{% endblock navbar_menu %}

{#
	
{% block side_menu_items %}

	{{ menu.li('messages', 'Vraag en aanbod', 'newspaper-o') }}
	{{ menu.li('users', 'Leden', 'users') }}
	{{ menu.li('transactions', 'Transacties', 'exchange') }}
	{{ menu.li('news', 'Nieuws', 'calendar-o') }}
	{{ menu.li('forum', 'Forum', 'comments-o') }}
	{{ menu.li('support', 'Probleem melden', 'ambulance') }}
	{% block side_menu_items_extra %}{% endblock %}

{% endblock side_menu_items %}

#}

{% block side_menu_items %}

	{% for page, prop in auth_pages %}
	{{ menu.li(page, prop, active_page) }}
	{% endfor %}

{% endblock side_menu_items %}


{% block top_buttons %}{% endblock top_buttons %}

{#

$count_interlets_groups = count($eland_interlets_groups) + count($elas_interlets_groups);

if (!$s_anonymous && ($count_interlets_groups + count($logins)) > 1)
{
	<li class="dropdown">
	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
	<span class="fa fa-share-alt"></span> 
	Groep
	<span class="caret"></span></a> 
	<ul class="dropdown-menu" role="menu">

	foreach ($logins as $login_schema => $login_id)
	{
		$class = ($s_schema == $login_schema && count($logins) > 1) ? ' class="active-group"' : '
		$class = ($login_schema == $app['eland.this_group']->get_schema() && $login_schema == $s_schema) ? ' class="active"' : $class;

		<li
		 $class;
		>
		
		<a href="
		 $app['eland.protocol'] . $app['eland.groups']->get_host($login_schema) . '/' . $app['eland.script_name'] . '.php?r=
		 ($login_id == 'elas') ? 'guest' : $app['session']->get('role.' . $login_schema);
		&u=' . $login_id;
		">

		 readconfigfromdb('systemname', $login_schema);
		 ($login_id == 'elas') ? ' (eLAS gast login)' : ' (eigen groep)
		</a>
		</li>

	}

	if ($count_interlets_groups)
	{
		<li class="divider"></li>

		if (count($eland_interlets_groups))
		{
			foreach ($eland_interlets_groups as $sch => $h)
			{
				<li
				 ($app['eland.this_group']->get_schema() == $sch) ? ' class="active"' : '
				>

				$page = (isset($allowed_interlets_landing_pages[$app['eland.script_name']])) ? $app['eland.script_name'] : 'messages

				<a href="' . generate_url($page,  ['welcome' => 1], $sch) . '">
				 readconfigfromdb('systemname', $sch) . '</a>
				</li>
			}
		}

		if (count($elas_interlets_groups))
		{
			foreach ($elas_interlets_groups as $grp_id => $grp)
			{
				<li>
				<a href="#" data-elas-group-id="' . $grp_id . '">
				 $grp['groupname'] . '</a>
				</li>
			}
		}
	}

	</ul>
	</li>
}


	<li class="dropdown">
	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
	<span class="fa fa-user"></span> 
#}
{#
	{% if app.s_master %}
		Master
	{% elseif app.s_elas_guest %}
		eLAS gast login
	{% elseif app.session_schema and app.s_id %}
		 {% if not app.s_group_self %}{{ app.session_schema }}.{% endif %}
		 {{ app.session_user.letscode }} {{ app.session_user.name }}
	{% endif %}
#}
{#
	<span class="caret"></span></a> 
	<ul class="dropdown-menu" role="menu">
	if ($s_schema && !$s_master && !$s_guest)
	{
		<li><a href="' . generate_url('users', ['id' => $s_id], $s_schema) . '">
		<i class="fa fa-user"></i> Mijn gegevens
		</a></li>

		<li><a href="' . generate_url('messages', ['uid' => $s_id], $s_schema) . '">
		<i class="fa fa-newspaper-o"></i> Mijn vraag en aanbod
		</a></li>

		<li><a href="' . generate_url('transactions', ['uid' => $s_id], $s_schema) . '">
		<i class="fa fa-exchange"></i> Mijn transacties
		</a></li>

		<li class="divider"></li>
	}

	<li><a href="' . generate_url('logout', [], $s_schema) . '">
	<i class="fa fa-sign-out"></i> Uitloggen
	</a></li>

	</ul>
	</li>
	if ($s_admin)
	{
		$menu = [
			'status'						=> ['exclamation-triangle', 'Status'],
			'categories'	 				=> ['clone', 'CategorieÃ«n'],
			'type_contact'					=> ['circle-o-notch', 'Contact types'],
			'contacts'						=> ['map-marker', 'Contacten'],
			'config'						=> ['gears', 'Instellingen'],
			'interlets'						=> ['share-alt', 'InterLETS'],
			'apikeys'						=> ['key', 'Apikeys'],
			'export'						=> ['download', 'Export'],
			'autominlimit'					=> ['arrows-v', 'Auto min limiet'],
			'mass_transaction'				=> ['exchange', 'Massa-Transactie'],
			'logs'							=> ['history', 'Logs'],
		];

		<li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown" 
		role="button" aria-expanded="false">
		<span class="fa fa-cog"></span> 
		Admin modus
		<span class="caret"></span></a> 
		<ul class="dropdown-menu" role="menu">
		foreach ($menu as $link => $item)
		{
			$active = ($app['eland.script_name'] == $link) ? ' class="active"' : '
			<li' . $active . '>
			 aphp($link, [], $item[1], false, false, $item[0]);
			</li>
		}
		<li class="divider"></li>
		$user_url = ($page_access == 'admin') ? 'messages.php' : parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
		$get_params = $_GET;
		$get_params['r'] = 'user
		<li>
		<a href="' . $user_url . '?' . http_build_query($get_params) . '"><i class="fa fa-times"></i>
		 Admin modus uit</a>
		</li>
		</ul>
		</li>
	}
	else if ($s_group_self && ((isset($session_user) && $session_user['accountrole'] == 'admin') || $s_master))
	{
		<li class="dropdown">
		$admin_url = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
		$get_params = $_GET;
		$get_params['r'] = 'admin

		<a href="' . $admin_url . '?' . http_build_query($get_params) . '" 
		title="Admin modus inschakelen">
		<span class="fa fa-times text-danger"></span> 
		Admin modus
		</a> 
	}

}

</ul>
</div>
#}

