{% extends 'own_group.html.twig' %}

{% import 'macro/menu.html.twig' as m %}

{% set access = 'a' %}

{% set admin_menu_ary = {
  'status': {'title': 'status.title', 'fa': 'exclamation-triangle', 'route': 'status'},
  'page': {'title': 'page_a_index.title', 'fa': 'file-code-o', 'route': 'page_a_index'},
  'permission': {'title': 'permission.title', 'fa': 'hand-paper-o', 'route': 'permission'},
  'category': {'title': 'category_index.title', 'fa': 'clone', 'route': 'category_index'},
  'typecontact': {'title': 'type_contact_index.title', 'fa': 'circle-o-notch', 'route': 'typecontact_index'},
  'custom': {'title': 'custom_field_index.title', 'fa': 'circle-o-notch', 'route': 'custom_field_index'},
  'contactdetail': {'title': 'contact_detail_index.title', 'fa': 'map-marker', 'route': 'contactdetail_index'},
  'config': {'title': 'config.title', 'fa': 'gears', 'route': 'config_index'},
  'export': {'title': 'export.title', 'fa': 'download', 'route': 'export'},
  'auto': {'title': 'auto_min_limit.title', 'fa': 'arrows-v', 'route': 'auto_min_limit'},
  'mass': {'title': 'mass_transaction.title', 'fa': 'exchange', 'route': 'mass_transaction'},
  'periodic': {'title': 'periodic_charge.title', 'fa': 'refresh', 'route': 'periodic_charge'},
  'log': {'title': 'log.title', 'fa': 'history', 'route': 'log'}
}

%}

{% set admin_menu_en = [
  'status', 'permission', 'page', 'category', 'typecontact', 'custom_field', 'contactdetail',
  'config', 'export', 'auto', 'mass',
  'periodic', 'log'
]

%}

{% block navbar_container_class %} bg-info{% endblock %}
{% block navbar_groups %}{% endblock %}
{% block navbar_admin_disabled %}{% endblock %}

{% block navbar_admin -%}

  {{ m.nav_dropdown('admin_modus', 'cog') }}

  {% for key in admin_menu_en %}
    {% if admin_menu_ary[key] is defined %}
    {{ m.li(key, admin_menu_ary[key], active_menu, acc_sch) }}
    {% endif %}
  {% endfor %}

  {{ m.divider() }}
  {{ m.li_302_no_param({'route': 'logout', 'fa': 'sign-out', 'title': 'logout.title'}) }}
  {{ m.nav_dropdown_end() }}

{%- endblock navbar_admin %}

{% block top_buttons %}{% endblock top_buttons %}

{% block heading_pre %}
<small><span class="label label-info">{{ 'admin'|trans }}</span></small>&nbsp;
{% endblock heading_pre %}

{#

$count_interlets_groups = count($eland_interlets_groups) + count($elas_interlets_groups);

if (!$s_anonymous && ($count_interlets_groups + count($logins)) > 1)
{
	<li class="dropdown">
	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
	<span class="fa fa-share-alt"></span>
	Groep
	<span class="caret"></span></a>
	<ul class="dropdown-menu" role="menu">

	foreach ($logins as $login_schema => $login_id)
	{
		$class = ($s_schema == $login_schema && count($logins) > 1) ? ' class="active-group"' : '
		$class = ($login_schema == $app['eland.this_group']->get_schema() && $login_schema == $s_schema) ? ' class="active"' : $class;

		<li
		 $class;
		>

		<a href="
		 $app['eland.protocol'] . $app['eland.groups']->get_host($login_schema) . '/' . $app['eland.script_name'] . '.php?r=
		 ($login_id == 'elas') ? 'guest' : $app['session']->get('role.' . $login_schema);
		&u=' . $login_id;
		">

		 readconfigfromdb('systemname', $login_schema);
		 ($login_id == 'elas') ? ' (eLAS gast login)' : ' (eigen groep)
		</a>
		</li>

	}

	if ($count_interlets_groups)
	{
		<li class="divider"></li>

		if (count($eland_interlets_groups))
		{
			foreach ($eland_interlets_groups as $sch => $h)
			{
				<li
				 ($app['eland.this_group']->get_schema() == $sch) ? ' class="active"' : '
				>

				$page = (isset($allowed_interlets_landing_pages[$app['eland.script_name']])) ? $app['eland.script_name'] : 'messages

				<a href="' . generate_url($page,  ['welcome' => 1], $sch) . '">
				 readconfigfromdb('systemname', $sch) . '</a>
				</li>
			}
		}

		if (count($elas_interlets_groups))
		{
			foreach ($elas_interlets_groups as $grp_id => $grp)
			{
				<li>
				<a href="#" data-elas-group-id="' . $grp_id . '">
				 $grp['groupname'] . '</a>
				</li>
			}
		}
	}

	</ul>
	</li>
}


	<li class="dropdown">
	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
	<span class="fa fa-user"></span>
#}
{#
	{% if app.s_master %}
		Master
	{% elseif app.s_elas_guest %}
		eLAS gast login
	{% elseif app.session_schema and app.s_id %}
		 {% if not app.s_group_self %}{{ app.session_schema }}.{% endif %}
		 {{ app.session_user.letscode }} {{ app.session_user.name }}
	{% endif %}
#}
{#
	<span class="caret"></span></a>
	<ul class="dropdown-menu" role="menu">
	if ($s_schema && !$s_master && !$s_guest)
	{
		<li><a href="' . generate_url('users', ['id' => $s_id], $s_schema) . '">
		<i class="fa fa-user"></i> Mijn gegevens
		</a></li>

		<li><a href="' . generate_url('messages', ['uid' => $s_id], $s_schema) . '">
		<i class="fa fa-newspaper-o"></i> Mijn vraag en aanbod
		</a></li>

		<li><a href="' . generate_url('transactions', ['uid' => $s_id], $s_schema) . '">
		<i class="fa fa-exchange"></i> Mijn transacties
		</a></li>

		<li class="divider"></li>
	}

	<li><a href="' . generate_url('logout', [], $s_schema) . '">
	<i class="fa fa-sign-out"></i> Uitloggen
	</a></li>

	</ul>
	</li>
	if ($s_admin)
	{
		$menu = [
			'status'						=> ['exclamation-triangle', 'Status'],
			'categories'	 				=> ['clone', 'CategorieÃ«n'],
			'type_contact'					=> ['circle-o-notch', 'Contact types'],
			'contacts'						=> ['map-marker', 'Contacten'],
			'config'						=> ['gears', 'Instellingen'],
			'interlets'						=> ['share-alt', 'InterLETS'],
			'apikeys'						=> ['key', 'Apikeys'],
			'export'						=> ['download', 'Export'],
			'autominlimit'					=> ['arrows-v', 'Auto min limiet'],
			'mass_transaction'				=> ['exchange', 'Massa-Transactie'],
			'logs'							=> ['history', 'Logs'],
		];

		<li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown"
		role="button" aria-expanded="false">
		<span class="fa fa-cog"></span>
		Admin modus
		<span class="caret"></span></a>
		<ul class="dropdown-menu" role="menu">
		foreach ($menu as $link => $item)
		{
			$active = ($app['eland.script_name'] == $link) ? ' class="active"' : '
			<li' . $active . '>
			 aphp($link, [], $item[1], false, false, $item[0]);
			</li>
		}
		<li class="divider"></li>
		$user_url = ($page_access == 'admin') ? 'messages.php' : parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
		$get_params = $_GET;
		$get_params['r'] = 'user
		<li>
		<a href="' . $user_url . '?' . http_build_query($get_params) . '"><i class="fa fa-times"></i>
		 Admin modus uit</a>
		</li>
		</ul>
		</li>
	}
	else if ($s_group_self && ((isset($session_user) && $session_user['accountrole'] == 'admin') || $s_master))
	{
		<li class="dropdown">
		$admin_url = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
		$get_params = $_GET;
		$get_params['r'] = 'admin

		<a href="' . $admin_url . '?' . http_build_query($get_params) . '"
		title="Admin modus inschakelen">
		<span class="fa fa-times text-danger"></span>
		Admin modus
		</a>
	}

}

</ul>
</div>
#}
