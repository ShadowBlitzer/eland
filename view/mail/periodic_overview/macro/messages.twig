{% macro html(messages, group, new_message_url, messages_url, s3_url, validate_param) -%}
<h3><a href="{{ messages_url }}{{ validate_param }}">Vraag en aanbod</a></h3>
{% if messages %}
<p>Deze lijst bevat vraag en aanbod dat de afgelopen {{ group.saldofreqdays }} dagen online is geplaatst.</p>
<ul>
{% for msg in messages %}
<li><strong><a href="{{ msg.url }}{{ validate_param }}">{% if msg.offer %}Aanbod{% else %}Vraag{% endif %}: {{ msg.content }}</a></strong>
<br>
{% if msg.images|length %}<br><img src="{{ s3_url }}{{ msg.images.0 }}" height="200" alt="afbeelding"><br>{% endif %}
{{ msg.description }}
{% if msg.amount %}<br>(Richt-)prijs: {{ msg.amount }} {{ group.currency }}{% if msg.units %} per {{ msg.units }}{% endif %}{% endif %}
<br>Ingegeven door: <a href="{{ msg.user_url }}{{ validate_param }}">{{ msg.user }}</a>
{% if msg.addr %}<a href="https://www.google.be/maps/place/{{ msg.addr }}">adres</a>
{% if msg.geo is defined and user.geo is defined %}{{ distance_p(user.geo, msg.geo) }}{% endif %} | {% endif %}
{% if msg.postcode %}postcode: {{ msg.postcode }} | {% endif %}
{% for mail in msg.mail %}<a href="mailto:{{ mail }}?subject={{ msg.content|url_encode }}">E-mail</a>
{% if not loop.last %}|{% endif %} {% endfor %}
</li><br>

{% endfor %}
</ul>

{% else %}
<p>Er werd geen nieuw vraag of aanbod online geplaatst.</p>
{% endif %}

<p><a href="{{ new_message_url }}{{ validate_param }}">Geef zelf je eigen vraag of aanbod in.</a></p>

{% endmacro html %}

{% macro text(messages, group, new_message_url, messages_url, s3_url, validate_param) %}

Recent Vraag en Aanbod
----------------------

{% if messages %}
Deze lijst bevat vraag en aanbod dat de afgelopen {{ config('saldofreqdays', schema) }} dagen online is geplaatst.
{% for msg in messages %}

{% if msg.offer %}Aanbod{% else %}Vraag{% endif %}: {{ msg.content }} ({% if msg.images|length %}{{ msg.images|length }}{% else %}geen{% endif %} {% if msg.images|length == 1 %}afbeelding{% else %} afbeeldingen {% endif %})
{{ msg.url }}{{ validate_param }}
	Ingegeven door: {{ msg.user}}{{ validate_param }}
{% endfor %}
{% else %}
Er werd geen nieuw vraag of aanbod online geplaatst afgelopen {{ group.saldofreqdays }} dagen.
{% endif %}

Geef zelf je eigen vraag of aanbod in: {{ new_message_url }}{{ validate_param }}

{% endmacro messages %}
